!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.aiueo=e():t.aiueo=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=15)}([function(t,e){t.exports=require("@babel/runtime/regenerator")},function(t,e){t.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r.d(e,"b",function(){return u});var n=r(5),o=r.n(n);function i(t){var e=t;if(t&&"object"===o()(t))for(var r in e="[object Array]"===Object.prototype.toString.call(t)?[]:{},t)e[r]=i(t[r]);return e}function u(t){var e=(new Date).getTime();return"".concat(t).concat(e.toString(36)).concat(Math.random().toString(36))}},function(t,e){t.exports=require("@babel/runtime/helpers/classCallCheck")},function(t,e){t.exports=require("@babel/runtime/helpers/createClass")},function(t,e){t.exports=require("@babel/runtime/helpers/typeof")},function(t,e){},,,,,,function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return n.exec(t).slice(1)};function i(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var u=o>=0?arguments[o]:t.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(e=u+"/"+e,n="/"===u.charAt(0))}return e=r(i(e.split("/"),function(t){return!!t}),!n).join("/"),(n?"/":"")+e||"."},e.normalize=function(t){var n=e.isAbsolute(t),o="/"===u(t,-1);return(t=r(i(t.split("/"),function(t){return!!t}),!n).join("/"))||n||(t="."),t&&o&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var o=n(t.split("/")),i=n(r.split("/")),u=Math.min(o.length,i.length),a=u,c=0;c<u;c++)if(o[c]!==i[c]){a=c;break}var s=[];for(c=a;c<o.length;c++)s.push("..");return(s=s.concat(i.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},e.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return o(t)[3]};var u="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(16))},,,function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return b});var n=r(5),o=r.n(n),i=r(0),u=r.n(i),a=r(1),c=r.n(a),s=r(3),f=r.n(s),l=r(4),p=r.n(l),h=r(6),v=r(12),d=r(2),b=function(){function t(e){f()(this,t),this.dataPath=e,this.collections={},h.existsSync(this.dataPath)||h.mkdirSync(this.dataPath),this.startJobLoop()}return p()(t,[{key:"getOrCreateCollection",value:function(){var t=c()(u.a.mark(function t(e){var r,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.collections[e]){t.next=6;break}return r=v.resolve(this.dataPath,e),n={path:r,isLocalLocking:!1,queue:[]},this.collections[e]=n,t.next=6,this.doJob(e,c()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:h.writeFileSync(n.path,"{}");case 1:case"end":return t.stop()}},t,this)})));case 6:return t.abrupt("return",this.collections[e]);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"doJob",value:function(){var t=c()(u.a.mark(function t(e,r){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrCreateCollection(e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,new Promise(function(t,e){n.queue.push(c()(u.a.mark(function o(){return u.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.t0=t,o.next=4,r(n);case 4:o.t1=o.sent,(0,o.t0)(o.t1),o.next=11;break;case 8:o.prev=8,o.t2=o.catch(0),e(o.t2);case 11:case"end":return o.stop()}},o,this,[[0,8]])})))});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"getJson",value:function(){var t=c()(u.a.mark(function t(e){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrCreateCollection(e);case 2:return r=t.sent,t.next=5,this.doJob(e,c()(u.a.mark(function t(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.readFileSync(r.path,"utf8"),t.abrupt("return",JSON.parse(e));case 2:case"end":return t.stop()}},t,this)})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"setItems",value:function(){var t=c()(u.a.mark(function t(e,r){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrCreateCollection(e);case 2:return n=t.sent,t.next=5,this.doJob(e,c()(u.a.mark(function t(){var e,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.readFileSync(n.path,"utf8"),o=JSON.parse(e),r.forEach(function(t){o[t._id]=t}),h.writeFileSync(n.path,JSON.stringify(o)),t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"removeItems",value:function(){var t=c()(u.a.mark(function t(e,r){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrCreateCollection(e);case 2:return n=t.sent,t.next=5,this.doJob(e,c()(u.a.mark(function t(){var e,o,i;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.readFileSync(n.path,"utf8"),o=JSON.parse(e),i=[],r.forEach(function(t){var e=o[t];e&&i.push(Object(d.a)(e)),delete o[t]}),h.writeFileSync(n.path,JSON.stringify(o)),t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"dropCollection",value:function(){var t=c()(u.a.mark(function t(e){var r=this;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.doJob(e,function(){var t=c()(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:h.unlinkSync(n.path),delete r.collections[e];case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"startJobLoop",value:function(){var t=this;setTimeout(function(){var e=function(e){var r=t.collections[e];if(!r||0===r.queue.length||r.isLocalLocking)return{v:void 0};r.isLocalLocking=!0,r.queue.shift()().then(function(){r.isLocalLocking=!1})};for(var r in t.collections){var n=e(r);if("object"===o()(n))return n.v}t.startJobLoop()},1)}}]),t}()},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(t){n=u}}();var c,s=[],f=!1,l=-1;function p(){f&&c&&(f=!1,c.length?s=c.concat(s):l=-1,s.length&&h())}function h(){if(!f){var t=a(p);f=!0;for(var e=s.length;e;){for(c=s,s=[];++l<e;)c&&c[l].run();l=-1,e=s.length}c=null,f=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function d(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];s.push(new v(t,e)),1!==s.length||f||a(h)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}])});